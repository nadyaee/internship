<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Category -->
    <record id="module_internship_management" model="ir.module.category">
        <field name="name">Internship Management</field>
        <field name="description"> Help you to handle Internship Management </field>
    </record>
    <!-- Group -->
    <record id="group_staff" model="res.groups">
        <field name="name">Staff</field>
        <field name="category_id" ref="module_internship_management"/>
        <field name="implied_ids" eval="[(4, ref('group_student'))]"/>
    </record>
    <record id="group_student" model="res.groups">
        <field name="name">Student</field>
        <field name="category_id" ref="module_internship_management"/>    
    </record>

    <!-- Permission Record Rule of User-->
    <data noupdate="1">
        <!-- Group Student -->
        <record id="student_personal_rule" model="ir.rule">
            <field name="name">Personal Student</field>
            <field ref="model_student_student" name="model_id"/>
            <field name="domain_force">[('user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('v11_internship.group_student'))]"/>
        </record>
         <record id="student_submission_record_rule" model="ir.rule">
            <field name="name">Submission Student</field>
            <field ref="model_submission_submission" name="model_id"/>
            <field name="domain_force">['|',('student_id.user_id','=',user.id),('create_uid', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('v11_internship.group_student'))]"/>
        </record>
        
        <record id="student_intern_directory_record_rule" model="ir.rule">
            <field name="name">Intern Directory Student</field>
            <field ref="model_intern_directory" name="model_id"/>
            <field name="domain_force">[('create_uid','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('v11_internship.group_student'))]"/>
        </record>
        <record id="student_intern_tasklist_rule" model="ir.rule">
            <field name="name">Intern Task List Student</field>
            <field ref="model_intern_tasklist" name="model_id"/>
            <field name="domain_force">[('create_uid','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('v11_internship.group_student'))]"/>
       </record>
        <!-- Group Staff -->
        <record id="staff_personal_rule" model="ir.rule">
            <field name="name">Personal Staff</field>
            <field ref="model_staff_staff" name="model_id"/>
            <field name="domain_force">[('user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('v11_internship.group_staff'))]"/>
        </record>
        <record id="staff_student_record_rule" model="ir.rule">
            <field name="name">Staff : show only own students</field>
            <field ref="model_student_student" name="model_id"/>
            <field name="domain_force">[('program_id', 'in', [user.x_staff_ids.program_id.id, False])]</field>
            <field name="groups" eval="[(4, ref('v11_internship.group_staff'))]"/>
        </record>
        <record id="staff_submission_record_rule" model="ir.rule">
            <field name="name">Staff : show only submission own Students</field>
            <field ref="model_submission_submission" name="model_id"/>
            <field name="domain_force">[('staff_id.user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('v11_internship.group_staff'))]"/>
        </record>
        <record id="staff_intern_directory_record_rule" model="ir.rule">
            <field name="name">Staff : show only intern directory own Student</field>
            <field ref="model_intern_directory" name="model_id"/>
            <field name="domain_force">[('program_id', 'in', [user.x_staff_ids.program_id.id, False])]</field>
            <field name="groups" eval="[(4, ref('v11_internship.group_staff'))]"/>
        </record>
    </data>
</odoo>
 